---
layout: post
title:  "객체 지향 프로그래밍, 다형성이란 ? (feat. 스프링)"
subtitle: "객체 지향 프로그래밍, 다형성이란 ? (feat. 스프링)"
categories: development
tags: java
comments: false
---

# 객체 지향 프로그래밍이란?

- 객체 지향 프로그래밍은 컴퓨터 프로그램을 명령어의 목록으로 보는 시각에서 벗어나 여러 개의 독립된 단위, 즉 **"객체"들의 모임**으로 파악하고자 하는 것이다. 각각의 **객체는 메시지를 주고받고**, 데이터를 처리할 수 있다. (**협력**)
- 객체 지향 프로그래밍은 프로그램을 **유연하고 변경이 용이**하게 만들기 떄문에 대규모 소프트웨어 개발에 많이 사용된다.

### 유연하고 변경에 용이하다는 의미 ?

- 레고 블럭 조립하듯이
- 키보드, 마우스 갈아 끼우듯이
- 컴퓨터 부품 갈아 끼우듯이
- 컴포넌트를 쉽고 유연하게 변경하면서 개발할 수 있는 방법

# 다형성

**객체 지향의 핵심이자, 유연하고 변경에 용이하게 해주는 것이 바로 '다형성'이다.** 

## 다형성의 실세계 비유

- 실세계와 객체 지향을 1:1로 매칭이 되는 건 아니다. 그래도 실세계의 비유로 이해하기에는 좋기에, **역할(인터페이스)**과 **구현**으로 세상을 구분해보자.

## 예시 1) 운전자 - 자동차

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dd3e1c24-9b52-4ee8-95a2-7a6a13d6afff/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dd3e1c24-9b52-4ee8-95a2-7a6a13d6afff/Untitled.png)

운전자의 자동차가 K3에서 아반떼나 테슬라로 바뀐다고해서 운전을 못하는 것이 아니다. 운전 방법을 새로 익히지 않아도 똑같이 바로 운전을 할 수 있다. 한마디로 **자동차가 바뀌어도 운전자한테 영향을 주지 않는다.** 왜냐하면 운전자는 자동차의 역할(인터페이스)에만 의존하고 있기 때문이다. 

자동차의 구현이 바뀌어도 역할(인터페이스)만 그대로 유지된다면, 완전한 새로운 차가 나오더라도 운전자는 그대로 자동차들을 운전할 수 있게된다. 그러니 자동차의 세상을 무한히 확장할 수 있는 것이다. 

**클라이언트한테 영향을 주지 않고, 새로운 기능을 제공할 수 있다는 것이다. 왜냐하면 역할과 구현으로 세상을 구분했기 때문**이다. 여기서 **중요한 것은 자동차를 여러개 구현할 수 있다는 점이 아니라, 새로운 자동차가 나와도 클라이언트가 새로운 걸 배우지 않아도 되는 점이다.** 

## 예시 2) 공연 무대 - 로미오와 줄리엣 공연

로미오의 역할은 장동건이 맡을 수도 있고 원빈이 맡을 수도 있다. 이게 가능하게 된 이유는 **'역할'과 '구현'을 나누었기 때문이다. 이로 인해 변경 가능한 대체 가능성이 생긴다. 이게 바로 유연하고 변경이 용이하다는 뜻이다.** 내부 구조를 몰라도 된다. 로미오 역할을 하는 사람은 누가 와도 상관이 없는 것이다. 조금 더 풀어서 설명하면, 로미오의  구현이 바뀐다고 해서 줄리엣의 역할에 영향을 주지 않는다. 


## 역할과 구현을 분리했을 때의 장점

**역할**과 **구현**으로 구분하면 세상이 **단순**해지고, **유연**해지며 **변경**도 편리해진다. 

### 장점

- **클라이언트**는 대상의 역할(인터페이스)만 알면 된다.
- **클라이언트**는 구현 대상의 **내부 구조를 몰라도 된다.**
- **클라이언트**는 구현 대상의 **내부 구조가 변경되어도 영향을 받지 않는다.**
- **클라이언트**는 구현 **대상 자체를 변경해도 영향을 받지 않는다.**

## 자바 언어에서의 역할과 구현을 분리

- 자바 언어의 다형성을 활용

    → 역할 = 인터페이스

    → 구현 = 인터페이스를 구현한 클래스, 구현 객체

- 객체를 설계할 때 **역할**과 **구현**을 명확히 분리
- 객체 설계시 역할(인터페이스)을 먼저 부여하고, 그 역할을 수행하는 구현 객체 만들기

## 객체의 협력이라는 관계부터 생각

- 혼자 있는 객체는 없다. 수 많은 객체 클라이언트와 객체 서버는 서로 협력 관계를 가진다.

## 자바 언어의 다형성

- 오버라이딩을 활용한 것도 다형성이다.
- 다형성으로 인터페이스를 구현한 객체를 실행 시점에 유연하게 변경할 수 있다.
- 물론 클래스 상속 관계도 다형성, 오버라이딩 적용 가능.

## 다형성의 본질

- 인터페이스를 구현한 객체 인스턴스를 **실행 시점에 유연하게 변경**할 수 있다.
- 다형서의 본질을 이해하려면 **협력**이라는 객체 사이의 관계에서 시작해야 한다.
- **클라이언트를 변경하지 않고, 서버의 구현 기능을 유연하게 변경할 수 있다.**

## 정리

- 실세계의 역할과 구현이라는 편리한 컨셉을 통해 객체 세상으로 가져올 수 있다.
- 유연하고 변경에 용이하다.
- 확장 가능한 설계이다.
- 클라이언트에 영향을 주지 않고 변경이 가능하다.
- 인터페이스를 안정적으로 잘 설계하는 것이 중요하다.

## 한계

- 역할(인터페이스) 자체가 변하면, 클라이언트와 서버 모두에 큰 변경이 발생한다.

    → 자동차를 비행기로 변경해야 한다면?

    → 대본 자체가 변경된다면?

    → USB 인터페이스가 변경된다면?

이러한 한계점 때문에 인터페이스가 변화하지 않도록 안정적으로 잘 설계하는 것이 중요하다. 

# 다형성만으로는 OCP, DIP를 지킬 수 없다.

### 옛날 옛적에는....

### 문제점

객체 지향의 핵심은 다형성이다. 그런데 다형성 만으로는 쉽게 부품을 갈아 끼우듯이 개발할 수 없다. 다형성 만으로는 구현 객체를 변경할 때 클라이언트 코드도 함께 변경된다. 다형성 만으로는 OCP, DIP를 지킬 수 없다. 무언가가 더 필요하다. 


### 해결책

옛날 어떤 개발자가 좋은 객체 지향 개발을 하려고 OCP, DIP 원칙을 지키면서 개발을 해보니, 너무 할 일이 많았다. 배보다 배꼽이 커진 격이다. 그래서 프레임워크를 만들어버린 것이다. 순수하게 자바로 OCP, DIP 원칙들을 지키면서 개발을 해보면, 결국 스프링 프레임워크를 만들게 된다.(더 정확히는 DI 컨테이너)

스프링은 다음 기술로 **다형성 + OCP, DIP**를 가능하게 지원을 했다. 

- DI(Dependency Injection) : 의존관계 및 의존성 주입
- DI 컨테이너 제공

이러한 기술을 통해 클라이언트 코드의 변경없이 기능 확장이 가능해졌고, 쉽게 부품을 교체하듯이 개발이 가능해졌다. 

# 스프링과 객체 지향

- 다형성이 가장 중요하다!
- 스프링은 다형성을 극대화해서 이용할 수 있게 도와준다.
- 스프링에서 이야기하는 제어의 역전(IoC), 의존관계 주입(DI)은 다형성을 활용해서 역할과 구현을 편리하게 다룰 수 있도록 지원한다.
- 스프링을 사용하면 마치 레고 블럭 조립하듯이! 공연 무대의 배우를 선택하듯이! 구현을 편리하게 변경할 수 있다.